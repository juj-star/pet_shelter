{% extends 'base.html' %}

{% block content %}
    <h1>Admin Dashboard</h1>

    <!-- Search form -->
    <form action="{{ url_for('main_bp.search_user') }}" method="post">
        <label for="search-user-id">Search User by ID:</label>
        <input type="text" id="search-user-id" name="user_id" required>
        <input type="submit" value="Search">
    </form>

    <div>
        <h2>User Profiles:</h2>
        {% for user in users %}
            <div class="user-profile">
                <p>User ID: {{ user['_id'] }}</p>
                <p>Username: {{ user['username'] }}</p>
                <p>Email: {{ user['email'] }}</p>
                {% if user.get('address') %}
                    <p>Address: {{ user['address'] }}</p>
                {% endif %}
                {% if user.get('name') %}
                    <p>Name: {{ user['name'] }}</p>
                {% endif %}
                <!-- Delete button -->
                <form action="{{ url_for('main_bp.delete_user', user_id=user['_id']) }}" method="post" onsubmit="return confirm('Are you sure you want to delete this user?');">
                    <input type="submit" value="Delete" />
                </form>
                <p>-----------------</p>
            </div>
        {% else %}
            <p>No users found.</p>
        {% endfor %}
    </div>
{% endblock %}
