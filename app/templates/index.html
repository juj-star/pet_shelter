{% extends 'base.html' %}

{% block content %}
    <h1>Welcome to the Pet Shelter</h1>

    <!-- Search form with separate fields -->
    <!-- ... [existing search form code] ... -->

    <section class="daily-feed">
        <h2>Daily News Feed</h2>
        {% if latest_animals %}
            <!-- Assume latest_animals is a dict with dates as keys and animal lists as values -->
            {% for date, animals_on_date in latest_animals|dictsort(false, 'key') %}
                <div class="date-group">
                    <h3>Posted on: {{ date }}</h3>
                    <div class="animal-list">
                        {% for animal in animals_on_date %}
                            <div class="animal">
                                <h4>{{ animal['type_name'] }} - {{ animal['breed_name'] }}</h4>
                                {% if animal['pic'] %}
                                    <img src="data:image/jpeg;base64,{{ animal['pic'] }}" alt="Picture of {{ animal['type_name'] }}" height="100">
                                {% else %}
                                    <p>No image available.</p>
                                {% endif %}
                                <p>{{ animal['description'] }}</p>
                                <a href="{{ url_for('main_bp.profile', profile_id=animal['_id']) }}">View Profile</a>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p>No animals found.</p>
        {% endif %}
    </section>
{% endblock %}
